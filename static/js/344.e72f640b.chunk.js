"use strict";(self.webpackChunktienhoito=self.webpackChunktienhoito||[]).push([[344],{5344:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var i=a(9060),n=a(4844),s=a(1652),o=a(9672),l=a(4896),r=a(2852),d=a(140),h=a(2573),c=a(1213),u=a(1236),j=a(2496);function y(t){let{data:e}=t;const a=t=>{let{active:e,payload:a}=t;return e&&a?(0,j.jsxs)("div",{style:{backgroundColor:"rgba(13, 0, 76)",opacity:"0.8",padding:"1em"},className:"custom-tooltip",children:[(0,j.jsx)("h3",{children:a[0].payload.name}),(0,j.jsxs)("p",{children:[a[0].value," tuntia"]})]}):null};return(0,j.jsx)(n.W,{height:"95%",children:(0,j.jsxs)(s.e,{title:"Reitit teht\xe4v\xe4tyypin mukaan",data:e,margin:{top:5,right:20,left:10,bottom:60},children:[(0,j.jsx)(o._,{strokeDasharray:"3 3"}),(0,j.jsx)(l.U,{dataKey:"value",fill:"#8884d8",children:e.length<10?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.A,{dataKey:"name",position:"bottom"}),(0,j.jsx)(r.A,{dataKey:"value",position:"top"})]}):(0,j.jsx)(j.Fragment,{})}),(0,j.jsx)(d.K,{tick:!1,children:(0,j.jsx)(h.i,{value:"Teht\xe4v\xe4tyypit",fontSize:20,position:"bottom",offset:25})}),(0,j.jsx)(c.C,{domain:[0,"dataMax + 5"],children:(0,j.jsx)(h.i,{value:"Tuntia",fontSize:20,position:"left",angle:-90,offset:-10,style:{textAnchor:"middle"}})}),(0,j.jsx)(u.o,{content:(0,j.jsx)(a,{}),cursor:!1})]})})}function p(t){let{data:e}=t;const a=t=>{let{active:e,payload:a}=t;return e&&a?(0,j.jsxs)("div",{style:{backgroundColor:"rgba(13, 0, 76)",opacity:"0.8",padding:"1em"},className:"custom-tooltip",children:[(0,j.jsxs)("h3",{children:[a[0].payload.name," tuntia sitten k\xe4ytetty aika:"]}),(0,j.jsxs)("p",{children:[a[0].value," tuntia"]})]}):null};return(0,j.jsx)(n.W,{height:"95%",children:(0,j.jsxs)(s.e,{title:"Reitit ajan mukaan",data:e,margin:{top:5,right:20,left:10,bottom:60},children:[(0,j.jsx)(o._,{strokeDasharray:"3 3"}),(0,j.jsx)(l.U,{dataKey:"value",fill:"#82ca9d",children:(0,j.jsx)(r.A,{dataKey:"value",position:"top"})}),(0,j.jsx)(d.K,{tick:!0,children:(0,j.jsx)(h.i,{value:"Tuntia sitten",fontSize:20,position:"bottom"})}),(0,j.jsx)(c.C,{domain:[0,"dataMax + 1"],children:(0,j.jsx)(h.i,{value:"Tuntia",position:"left",angle:-90,fontSize:20,offset:-10,style:{textAnchor:"middle"}})}),(0,j.jsx)(u.o,{content:(0,j.jsx)(a,{}),cursor:!1})]})})}var x=a(92);function v(t){let{showStatBox:e,setShowStatBox:a,routes:n,date:s,tasksFi:o}=t;const[l,r]=(0,i.useState)("Valittuihin teht\xe4v\xe4tyyppeihin k\xe4ytetty aika teht\xe4v\xe4tyypin mukaan"),d=t=>{r(t.target.value)};let h=0,c={};o&&o.forEach((t=>{!0===t.show&&(c[t.nameFi]=0)}));let u={};n.forEach((t=>{let e=new Date(t.properties.endTime)-new Date(t.properties.startTime);t.properties.task_fi.forEach((t=>{void 0!==c[t]&&(c[t]+=e,h+=e)}));let a=Math.round((s-new Date(t.properties.endTime))/36e5);u[a]?u[a]+=e:u[a]=e}));let v=Object.keys(c).map(((t,e)=>({name:t,value:Math.round(c[t]/36e5*10)/10})));v.sort(((t,e)=>e.value-t.value));for(let i=0;i<24;i++)void 0===u[i]&&(u[i]=0);const m=Object.keys(u).map((t=>{let e;return e=t<=5?"#238823":t<=10?"#ffbf00":"#d2222d",{name:t,value:Math.round(u[t]/36e5*10)/10,fill:e}}));let k;return(0,x.c)(a),"Valittuihin teht\xe4v\xe4tyyppeihin k\xe4ytetty aika teht\xe4v\xe4tyypin mukaan"===l?k=(0,j.jsx)(y,{data:v}):"Reitteihin k\xe4ytetty aika ajan mukaan"===l&&(k=(0,j.jsx)(p,{data:m})),!0===e?(0,j.jsxs)("div",{className:"statbox",children:[(0,j.jsx)("button",{"data-testid":"statbox-close-button",onClick:()=>a(!1),children:"X"}),(0,j.jsx)("h2",{children:"Alueella olevien reittien ja ajoneuvojen tilastot"}),(0,j.jsx)("p",{children:'Huomioi kartalla rajattu alue ja "Suodata teht\xe4v\xe4tyyppej\xe4" valikko'}),(0,j.jsxs)("p",{children:[(0,j.jsx)("b",{children:"Reitteihin k\xe4ytetty aika: "}),Math.round(h/36e5)," tunti(a)"]}),(0,j.jsx)("label",{htmlFor:"charts",children:"Valitse kuvaaja: "}),(0,j.jsxs)("select",{name:"charts",value:l,onChange:d,children:[(0,j.jsx)("option",{value:"Valittuihin teht\xe4v\xe4tyyppeihin k\xe4ytetty aika teht\xe4v\xe4tyypin mukaan",children:"Teht\xe4v\xe4tyypit"}),(0,j.jsx)("option",{value:"Reitteihin k\xe4ytetty aika ajan mukaan",children:"Ajan mukaan"})]}),(0,j.jsxs)("div",{className:"chartDiv",children:[(0,j.jsx)("h2",{children:l}),k]})]}):(0,j.jsx)(j.Fragment,{})}},92:(t,e,a)=>{a.d(e,{c:()=>n});var i=a(9060);function n(t,e){(0,i.useEffect)((()=>{const a=a=>{"Escape"===a.key&&(t&&t(!1),e&&e(""))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}),[t,e])}}}]);
//# sourceMappingURL=344.e72f640b.chunk.js.map